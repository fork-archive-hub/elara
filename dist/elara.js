!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);var i={};var o={createSvgElement:function(t,e,n){var o=t+";"+e+"x"+n;if(void 0===i[o]){var s=document.createElement("div");return fetch(t).then((function(t){return t.text()})).then((function(t){var r=document.createElement("div");r.innerHTML=t;var a=r.querySelector("svg");a.removeAttribute("xmlns:a"),a.setAttribute("width",e+"px"),a.setAttribute("height",n+"px"),s.parentNode.replaceChild(a,s),i[o]=a})),s}return i[o].cloneNode(!0)}};function s(){this.taskbarElement=null,this.windowManager=null}s.prototype.bind=function(t,e){var n;this.taskbarElement=document.querySelector(t),this.taskbarElement.innerHTML="",this.windowManager=e,(n=document.createElement("div")).classList.add("elara-windows"),this.taskbarElement.appendChild(n),(n=document.createElement("div")).classList.add("elara-window-sets"),this.taskbarElement.appendChild(n);var i=this,o=function(){i.update()};this.windowManager.windowSetCollection.events.selectedChanged.subscribe(o),this.windowManager.windowSetCollection.events.added.subscribe((function(t,e){e.events.focusChanged.subscribe(o),e.events.changed.subscribe(o)})),this.windowManager.windowSetCollection.events.removed.subscribe((function(t,e){e.events.focusChanged.unsubscribe(o),e.events.changed.unsubscribe(o)}));for(var s=0;s<this.windowManager.windowSetCollection.count();s++){var r=this.windowManager.windowSetCollection.getAt(s);r.events.focusChanged.subscribe(o),r.events.changed.subscribe(o)}},s.prototype.update=function(){var t=this.taskbarElement.querySelector(".elara-windows");t.innerHTML="";for(var e=this.windowManager.getActiveControllerSet().getOrdered(),n=0;n<e.length;n++){let a=e[n];var i=document.createElement("div"),s=document.createElement("span");i.className="elara-window-button",s.innerText=a.getTitle();var r=o.createSvgElement(a.getIcon(),16,16);i.appendChild(r),i.appendChild(s),t.appendChild(i),a.state.focus&&i.classList.add("window-focus"),i.addEventListener("click",(function(){a.focusFromTaskbar()}))}this.updateSetButton()},s.prototype.updateSetButton=function(){var t=this.taskbarElement.querySelector(".elara-window-sets");t.innerHTML="";for(var e=this.windowManager.windowSetCollection,n=e.count(),i=e.getSelected(),o=0;o<n;o++){let n=e.getAt(o);var s=document.createElement("div");s.classList.add("window-set"),s.innerText=o+1,n===i?s.classList.add("active"):s.addEventListener("click",(function(){e.select(n)})),t.appendChild(s)}};var r=s,a=(n(1),r);function l(t,e,n){this.parent=t,this.title=e,this.height=n,this.drawerButton=null,this.drawer=null}l.prototype.construct=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");t.className="elara-drawer-button",e.className="elara-button",n.className="elara-drawer",e.innerText=this.title,t.appendChild(e),t.appendChild(n),this.drawerButton=t,this.drawer=n,null!==this.height&&void 0!==this.height&&(n.style.height=this.height);var i=this;return e.addEventListener("click",(function(){i.open()})),t},l.prototype.open=function(){this.drawerButton.classList.contains("opened")?this.close():(this.parent.closeAll(),null!==this.openCallback&&this.openCallback(this.drawer),this.drawerButton.classList.add("opened"))},l.prototype.close=function(){this.drawerButton.classList.contains("opened")&&this.drawerButton.classList.remove("opened")},l.prototype.bind=function(t){this.openCallback=t};var c=l,d={};var h={createSvgElement:function(t,e,n){var i=t+";"+e+"x"+n;if(void 0===d[i]){var o=document.createElement("div");return fetch(t).then((function(t){return t.text()})).then((function(t){var s=document.createElement("div");s.innerHTML=t;var r=s.querySelector("svg");r.removeAttribute("xmlns:a"),r.setAttribute("width",e+"px"),r.setAttribute("height",n+"px"),o.parentNode.replaceChild(r,o),d[i]=r})),o}return d[i].cloneNode(!0)}};function u(t,e,n){this.parent=t,this.title=e,this.items=n,this.dropdownButton=null}u.prototype.construct=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");t.className="elara-dropdown-button",e.className="elara-button",n.className="elara-dropdown-items",e.innerText=this.title,t.appendChild(e),t.appendChild(n),this.dropdownButton=t;var i=this;return e.addEventListener("click",(function(){i.open()})),t},u.prototype.constructButton=function(t){var e=this,n=document.createElement("div"),i=document.createElement("div");if(n.className="elara-menu-button",i.className="elara-menu-button-label",i.innerText=t.title,void 0!==t.icon){var o=document.createElement("div");o.className="elara-button-icon-container",o.appendChild(h.createSvgElement(t.icon,16,16)),n.appendChild(o)}return n.appendChild(i),n.addEventListener("click",(function(){!0!==t.click()&&e.close()})),n},u.prototype.open=function(){if(this.dropdownButton.classList.contains("opened"))this.close();else{this.parent.closeAll(),this.dropdownButton.classList.add("opened");for(var t=this.dropdownButton.querySelector(".elara-dropdown-items"),e=0;e<this.items.length;e++)t.appendChild(this.constructButton(this.items[e]))}},u.prototype.close=function(){if(this.dropdownButton.classList.contains("opened")){for(var t=this.dropdownButton.querySelectorAll(".elara-dropdown-items"),e=0;e<t.length;e++)t[e].innerHTML="";this.dropdownButton.classList.remove("opened")}};var p=u;function m(){}m.prototype.construct=function(){var t=document.createElement("div");return t.className="elara-seperator",t},m.prototype.close=function(){};var w=m;function f(){this.toolbarElement=null,this.items=[],this.autoUpdate=!0,this.pendingConstruct=!1}f.prototype.suspendLayout=function(){this.autoUpdate=!1},f.prototype.resumeLayout=function(){this.autoUpdate=!0,this.pendingConstruct&&this.construct()},f.prototype.constructIfEnabled=function(){this.autoUpdate?this.construct():this.pendingConstruct=!0},f.prototype.bind=function(t,e){this.toolbarElement=document.querySelector(t),this.toolbarElement.innerHTML="";var n=document.createElement("div");n.classList.add("elara-toolbar-buttons"),this.toolbarElement.appendChild(n)},f.prototype.construct=function(){this.pendingConstruct=!1;var t=this.toolbarElement.querySelector(".elara-toolbar-buttons");t.innerHTML="";for(var e=0;e<this.items.length;e++){var n=this.items[e].construct();if(Array.isArray(n))for(var i=0;i<n.length;i++)t.appendChild(n[i]);else null!=n&&t.appendChild(n)}},f.prototype.closeAll=function(){for(var t=0;t<this.items.length;t++)this.items[t].close()},f.prototype.addSeperator=function(){this.items.push(new w),this.constructIfEnabled()},f.prototype.addDropDownMenu=function(t,e){this.items.push(new p(this,t,e)),this.constructIfEnabled()},f.prototype.addDrawer=function(t,e){var n=new c(this,t,e);return this.items.push(n),this.constructIfEnabled(),n};var v=f,g=(n(2),v);function y(t){this.owner=t,this.subscribers=[]}y.prototype.subscribe=function(t){this.subscribers.push(t)},y.prototype.unsubscribe=function(t){var e=this.subscribers.indexOf(t);-1!==e&&this.subscribers.splice(e,1)},y.prototype.invoke=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e](this.owner,t)};var b=y;function C(t){var e=this;if(e.value=t,e.unit=null,e.number=null,Number.isInteger(t))e.unit="px",e.number=t;else if(Number(t)===t&&t%1!=0)e.unit="px",e.number=Math.floor(t);else if(t.endsWith("px"))e.unit="px",e.number=+t.substring(0,t.length-2);else{if(!t.endsWith("%"))throw"Invalid value";e.unit="%",e.number=+t.substring(0,t.length-1)}e.raw=function(){return e.value},e.getPx=function(){if("px"===e.unit)return e.number;throw"The value does not have the unit: px."},e.cssValue=function(){return e.number+e.unit}}function E(t,e){this.x=t,this.y=e}function z(t,e,n){this.x=t,this.y=e,this.z=n}function x(){this.controllers=[],this.orderedControllers=[],this.focus=null,this.events={changed:new b(this),focusChanged:new b(this)}}x.prototype.add=function(t){this.controllers.push(t),this.orderedControllers.push(t);var e=this;t.events.closed.subscribe((function(){e.remove(t),e.events.changed.invoke()})),t.events.focus.subscribe((function(){e.setFocus(t)})),t.events.lostFocus.subscribe((function(){e.resetFocus()})),this.events.changed.invoke()},x.prototype.get=function(t){t=+t;for(var e=0;e<this.controllers.length;e++)if(this.controllers[e].getId()==t)return this.controllers[e];return null},x.prototype.stash=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].stash()},x.prototype.resume=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].resume()},x.prototype.remove=function(t){var e=this.controllers.indexOf(t);if(-1===e)throw"Window controller not found.";var n=this.orderedControllers.indexOf(t);if(-1===n)throw"Window controller not found.";this.controllers.splice(e,1),this.orderedControllers.splice(n,1),this.events.changed.invoke()},x.prototype.getOrdered=function(){return this.orderedControllers},x.prototype.getMaximumForPositionZ=function(){for(var t=-1,e=0;e<this.controllers.length;e++){var n=this.controllers[e].position.z;n>t&&(t=n)}return t},x.prototype.setFocus=function(t){this.focus=t,this.controllers.sort((function(e,n){return e==t?1:n==t?-1:e.position.z-n.position.z}));for(var e=0;e<this.controllers.length;e++)this.controllers[e].position.z=new C(e),this.controllers[e].applyDimensions();var n=!1;for(e=0;e<this.controllers.length;e++)this.controllers[e].state.focus&&(this.controllers[e].state.focus=!1,this.controllers[e].applyState(),n=!0);t.state.focus||(t.state.focus=!0,t.applyState(),n=!0),n&&this.events.focusChanged.invoke()},x.prototype.resetFocus=function(t){this.focus=null;for(var e=!1,n=0;n<this.controllers.length;n++)this.controllers[n].state.focus&&(this.controllers[n].state.focus=!1,this.controllers[n].applyState(),e=!0);e&&this.events.focusChanged.invoke()},x.prototype.getCurrentFocus=function(t){return this.focus},x.prototype.cascade=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show(),this.controllers[t].move(100+50*t,100+50*t)},x.prototype.minimizeAll=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].minimize()},x.prototype.showAll=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show()},x.prototype.maximizeAll=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show(),this.controllers[t].maximize()},x.prototype.split=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show();var e=this.controllers.length;if(0!==e)if(1===e)this.controllers[0].resize("fullscreen");else if(2===e)this.controllers[0].resize("left"),this.controllers[1].resize("right");else if(3===e)this.controllers[0].resize("top-left"),this.controllers[1].resize("top-right"),this.controllers[2].resize("bottom");else if(e>3){var n=this.controllers.reverse();n[0].resize("top-left"),n[1].resize("top-right"),n[2].resize("bottom-left"),n[3].resize("bottom-right");for(t=4;t<e;t++)n[t].hide()}};var S=x;function M(){this.sets=[],this.selected=null,this.events={selectedChanged:new b(this),added:new b(this),removed:new b(this)}}M.prototype.getSelected=function(){return this.selected},M.prototype.getAt=function(t){return this.sets[t]},M.prototype.add=function(){var t=new S;this.sets.push(t),this.events.added.invoke(t)},M.prototype.select=function(t){if(-1===this.sets.indexOf(t))throw"Set not found";null!==this.selected&&this.selected.stash(),this.selected=t,this.selected.resume(),this.events.selectedChanged.invoke()},M.prototype.selectAt=function(t){null!==this.selected&&this.selected.stash(),this.selected=this.sets[t],this.selected.resume(),this.events.selectedChanged.invoke()},M.prototype.count=function(){return this.sets.length};var L=M;var T=function(){var t=this;t.session=null,t.start=function(e,n){var i={target:e.target,initialPageX:e.pageX,initialPageY:e.pageY,first:!0,transform:n.transform};return n.init(i),t.session=i,window.addEventListener("mousemove",t.moveHandler,!0),window.addEventListener("mouseup",t.moveUpHandler,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1},t.hasSession=function(){return null!==t.session},t.moveHandler=function(e){var n=e.pageX-t.session.initialPageX,i=e.pageY-t.session.initialPageY;return t.session.transform(t.session,n,i,e.pageX,e.pageY,t.session.first,!1),t.session.first=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1},t.moveUpHandler=function(e){window.removeEventListener("mousemove",t.moveHandler,!0),window.removeEventListener("mouseup",t.moveUpHandler,!1);var n=e.pageX-t.session.initialPageX,i=e.pageY-t.session.initialPageY;t.session.transform(t.session,n,i,e.pageX,e.pageY,t.session.first,!0),t.session=null}};function k(t){this.windowManager=t,this.engine=new T,this.resizeZoneSize=16}k.prototype.onTitlebarGrab=function(t){var e=this;e.engine.start(t,{init:function(t){t.window=t.target.closest(".elara-window"),t.controller=e.windowManager.getController(t.window.getAttribute("data-controller-id"));var n=e.windowManager.windowContainer.getBoundingClientRect(),i=t.window.getBoundingClientRect();t.initialWindowLeft=i.left-n.left,t.initialWindowTop=i.top-n.top},transform:function(t,n,i,o,s,r,a){r&&(e.windowManager.windowContainer.classList.add("window-dragging-active"),t.controller.state.moving=!0,t.controller.applyState(),t.controller.focus(),t.window.style["z-index"]=2e3);var l=t.initialWindowLeft+n,c=t.initialWindowTop+i;if(t.controller.move(l,c),a){var d=e.windowManager.getSuggestedDocking(o,s);null!=d?t.controller.resize(d):t.controller.move(l,c),e.windowManager.windowContainer.classList.remove("window-dragging-active"),t.controller.state.moving=!1,t.controller.applyState()}else t.controller.state.relative&&t.controller.setRelative(!1),e.windowManager.renderSuggestedDocking(o,s)}})},k.prototype.determineResizeCursor=function(t,e){if("resize"===t&&"resize"==e||"move"===t&&"move"==e)return"nw-resize";if("resize"===t&&"move"==e||"move"===t&&"resize"==e)return"ne-resize";if("none"!==t&&"none"===e)return"e-resize";if("none"===t&&"none"!==e)return"n-resize";throw"invalid input"},k.prototype.determineModes=function(t,e,n,i){var o=this.resizeZoneSize,s="none",r="none";return t<16?s="move":n-t<o&&(s="resize"),e<o?r="move":i-e<o&&(r="resize"),{hmode:s,vmode:r}},k.prototype.onWindowGrab=function(t){var e=this;e.engine.start(t,{init:function(n){n.window=n.target.closest(".elara-window"),n.controller=e.windowManager.getController(n.window.getAttribute("data-controller-id"));var i=e.windowManager.windowContainer.getBoundingClientRect(),o=n.window.getBoundingClientRect();n.initialWindowX=o.left-i.left,n.initialWindowY=o.top-i.top,n.initialWidth=n.controller.size.x.getPx(),n.initialHeight=n.controller.size.y.getPx();var s=t.pageX-o.left,r=t.pageY-o.top,a=e.determineModes(s,r,o.width,o.height);n.hmode=a.hmode,n.vmode=a.vmode,n.window.style.cursor=e.determineResizeCursor(n.hmode,n.vmode)},transform:function(t,n,i,o,s,r,a){r&&(e.windowManager.windowContainer.classList.add("window-resize-active"),t.controller.state.resizing=!0,t.controller.applyState(),t.controller.focus(),t.window.style["z-index"]=2e3);var l=t.initialWindowX,c=t.initialWindowY,d=t.initialWidth,h=t.initialHeight;"resize"===t.hmode?d+=n:"move"===t.hmode&&(l+=n,d-=n),"resize"===t.vmode?h+=i:"move"===t.vmode&&(c+=i,h-=i),d<0&&(d=0),h<0&&(h=0),t.controller.move(l,c),t.controller.resize(d,h),a&&(t.controller.state.resizing=!1,t.controller.applyState(),e.windowManager.windowContainer.classList.remove("window-resize-active"))}})},k.prototype.init=function(){var t=this;document.addEventListener("mousedown",(function(e){if(e.target.classList.contains("elara-title-bar")||e.target.classList.contains("elara-title"))t.onTitlebarGrab(e);else if(e.target.classList.contains("elara-window"))t.onWindowGrab(e);else for(var n=0;n<e.path.length;n++)if(void 0!==e.path[n].classList&&e.path[n].classList.contains("elara-window")){var i=t.windowManager.getController(e.path[n].getAttribute("data-controller-id"));return void(i.state.focus||i.focus())}})),document.addEventListener("mousemove",(function(e){if(void 0!==e.target.classList&&e.target.classList.contains("elara-window")&&!t.engine.hasSession()){var n=e.target,i=n.getBoundingClientRect(),o=e.pageX-i.left,s=e.pageY-i.top,r=t.determineModes(o,s,i.width,i.height);n.style.cursor=t.determineResizeCursor(r.hmode,r.vmode)}}))};var A=k;function D(){}D.prototype.window=function(){var t=this.titleBar(),e=this.content(),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div");return n.className="elara-window",i.className="elara-window-visible",o.className="elara-window-overlay",n.appendChild(i),i.appendChild(t),i.appendChild(e),i.appendChild(o),n},D.prototype.titleBar=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");t.className="elara-title-bar",e.className="elara-title",n.className="elara-icon-container";var i=this.controlbox();return t.appendChild(n),t.appendChild(e),t.appendChild(i),t},D.prototype.controlbox=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return t.className="elara-control-button minimize",e.className="elara-control-button maximize",n.className="elara-control-button close",i.className="elara-control-box",i.appendChild(t),i.appendChild(e),i.appendChild(n),i},D.prototype.content=function(){var t=document.createElement("div");return t.className="elara-window-content",t};var N=D,R={fullscreen:{top:0,left:0,width:"100%",height:"100%"},"top-left":{top:0,left:0,width:"50%",height:"50%"},"top-right":{top:0,left:"50%",width:"50%",height:"50%"},"bottom-left":{top:"50%",left:0,width:"50%",height:"50%"},"bottom-right":{top:"50%",left:"50%",width:"50%",height:"50%"},left:{top:0,left:0,width:"50%",height:"100%"},right:{top:0,left:"50%",width:"50%",height:"100%"},top:{top:0,left:0,width:"100%",height:"50%"},bottom:{top:"50%",left:0,width:"100%",height:"50%"}},B={};var P={createSvgElement:function(t,e,n){var i=t+";"+e+"x"+n;if(void 0===B[i]){var o=document.createElement("div");return fetch(t).then((function(t){return t.text()})).then((function(t){var s=document.createElement("div");s.innerHTML=t;var r=s.querySelector("svg");r.removeAttribute("xmlns:a"),r.setAttribute("width",e+"px"),r.setAttribute("height",n+"px"),o.parentNode.replaceChild(r,o),B[i]=r})),o}return B[i].cloneNode(!0)}};function W(t){this.id=t,this.nonRelativeDimensions=null,this.icon=null,this.title=null,this.position=new z(new C(0),new C(0),new C(0)),this.size=new E(new C(0),new C(0)),this.state={hidden:!1,relative:!1,moving:!1,resizing:!1,focus:!1,stashed:!1,allowMinimize:!0,allowMaximize:!0,allowClose:!0,alwaysOnTop:!1},this.windowElement=null,this.events={closed:new b(this),focus:new b(this),lostFocus:new b(this)}}W.prototype.applyDimensions=function(){null!==this.windowElement&&(this.windowElement.style.left=this.position.x.cssValue(),this.windowElement.style.top=this.position.y.cssValue(),this.windowElement.style["z-index"]=this.position.z.raw(),this.windowElement.style.width=this.size.x.cssValue(),this.windowElement.style.height=this.size.y.cssValue())},W.prototype.applyState=function(){var t=this;function e(e,n,i){t.state[e]!==i?t.windowElement.classList.contains(n)||t.windowElement.classList.add(n):t.windowElement.classList.contains(n)&&t.windowElement.classList.remove(n)}null!==this.windowElement&&(e("hidden","elara-window-hidden",!1),e("relative","elara-window-relative",!1),e("moving","elara-window-moving",!1),e("resizing","elara-window-resizing",!1),e("focus","elara-window-focus",!1),e("stashed","elara-window-stashed",!1),e("allowMinimize","elara-window-disable-minimize",!0),e("allowMaximize","elara-window-disable-maximize",!0),e("allowClose","elara-window-disable-close",!0),e("alwaysOnTop","elara-window-always-on-top",!1))},W.prototype.setRelative=function(t){this.state.relative!=t&&(this.state.relative=t,this.applyState(),t?this.setNonRelativeDimensions(this.position.x.raw(),this.position.y.raw(),this.size.x.raw(),this.size.y.raw()):this.restoreNonRelativeDimensions())},W.prototype.show=function(){this.state.hidden=!1,this.applyState()},W.prototype.minimize=function(){this.state.hidden=!0,this.applyState(),this.hasFocus()&&this.events.lostFocus.invoke()},W.prototype.setTitle=function(t){this.title=t,this.windowElement.querySelector(".elara-title").innerText=t},W.prototype.getTitle=function(){return this.title},W.prototype.getContentContainer=function(){return this.windowElement.querySelector(".elara-window-content")},W.prototype.toggleMaximize=function(){this.state.relative?this.setRelative(!1):this.resize("fullscreen")},W.prototype.getId=function(){return this.id},W.prototype.getWindow=function(){return this.windowElement},W.prototype.bindWindowElement=function(t){var e=this;t.querySelector(".elara-control-button.minimize").addEventListener("click",(function(){e.minimize()})),t.querySelector(".elara-control-button.maximize").addEventListener("click",(function(){e.maximize()})),t.querySelector(".elara-control-button.close").addEventListener("click",(function(){e.close()})),t.querySelector(".elara-title-bar").addEventListener("dblclick",(function(){e.toggleMaximize()})),t.setAttribute("data-controller-id",this.getId()),this.windowElement=t,this.applyDimensions(),this.applyState()},W.prototype.maximize=function(){this.resize("fullscreen")},W.prototype.close=function(){this.windowElement.parentElement.removeChild(this.windowElement),this.events.closed.invoke()},W.prototype.getIcon=function(){return this.icon},W.prototype.setIcon=function(t){if(this.icon!==t){this.icon=t;var e=this.windowElement.querySelector(".elara-icon-container");e.innerHTML="",e.appendChild(P.createSvgElement(this.icon,16,16))}},W.prototype.setNonRelativeDimensions=function(t,e,n,i){this.nonRelativeDimensions=null===t?null:{x:t,y:e,width:n,height:i}},W.prototype.restoreNonRelativeSize=function(){null!==this.nonRelativeDimensions&&(this.resize(this.nonRelativeDimensions.width,this.nonRelativeDimensions.height),this.nonRelativeDimensions=null)},W.prototype.restoreNonRelativePosition=function(){null!==this.nonRelativeDimensions&&(this.move(this.nonRelativeDimensions.x,this.nonRelativeDimensions.y),this.nonRelativeDimensions=null)},W.prototype.restoreNonRelativeDimensions=function(){if(null!==this.nonRelativeDimensions){var t=this.nonRelativeDimensions;this.move(t.x,t.y),this.resize(t.width,t.height),this.nonRelativeDimensions=null}},W.prototype.hasFocus=function(){return this.windowElement.classList.contains("elara-window-focus")},W.prototype.focus=function(){this.events.focus.invoke()},W.prototype.focusFromTaskbar=function(){this.hasFocus()?this.minimize():(this.show(),this.focus())},W.prototype.move=function(t,e){this.position.x=new C(t),this.position.y=new C(e),this.state.hidden=!1,this.applyDimensions(),this.applyState()},W.prototype.resize=function(t,e){if("string"==typeof t){var n=t;this.setRelative(!0);var i=R[n];this.position.x=new C(i.left),this.position.y=new C(i.top),this.size.x=new C(i.width),this.size.y=new C(i.height),this.applyDimensions()}else this.size.x=new C(t),this.size.y=new C(e),this.applyDimensions()},W.prototype.stash=function(){this.state.stashed=!0,this.applyState()},W.prototype.resume=function(){this.state.stashed=!1,this.applyState()},W.prototype.setAllowMinimize=function(t){this.state.allowMinimize!==t&&(this.state.allowMinimize=t,this.applyState())},W.prototype.setAllowMaximize=function(t){this.state.allowMaximize!==t&&(this.state.allowMaximize=t,this.applyState())},W.prototype.setAllowClose=function(t){this.state.allowClose!==t&&(this.state.allowClose=t,this.applyState())},W.prototype.setAlwaysOnTop=function(t){this.state.alwaysOnTop!==t&&(this.state.alwaysOnTop=t,this.applyState())};var q=W,O=[{left:0,right:1,top:0,bottom:1,name:"top-left"},{left:99,right:100,top:0,bottom:1,name:"top-right"},{left:0,right:1,top:99,bottom:100,name:"bottom-left"},{left:99,right:100,top:99,maxY:100,name:"bottom-right"},{left:0,right:100,top:0,bottom:1,name:"fullscreen"},{left:0,right:1,top:0,bottom:100,name:"left"},{left:99,right:100,top:0,bottom:100,name:"right"},{left:0,right:100,top:99,bottom:100,name:"bottom"}];function H(){this.windowContainer=null,this.windowSetCollection=new L,this.windowSetCollection.add(),this.windowSetCollection.selectAt(0),this.dragging=new A(this),this.construct=new N;var t=1;this.getNextId=function(){return t++}}H.prototype.bind=function(t){this.windowContainer=document.querySelector(t);var e=document.createElement("div");e.classList.add("window-drag-overlay"),this.windowContainer.appendChild(e),this.dragging.init()},H.prototype.getController=function(t){for(var e=this.windowSetCollection.count(),n=0;n<e;n++){var i=this.windowSetCollection.getAt(n).get(t);if(null!==i)return i}return null},H.prototype.getActiveControllerSet=function(){return this.windowSetCollection.getSelected()},H.prototype.createIFrameWindow=function(t,e){var n=this.createWindow(e),i=n.getContentContainer(),o=document.createElement("iframe");return o.src=t,i.appendChild(o),o.onload=function(){n.setTitle(o.contentDocument.title)},n.iframe=o,n},H.prototype.createWindow=function(t){var e=new q(this.getNextId()),n={title:"-",size:{width:600,height:400},location:{x:100,y:100},icon:null,allowMinimize:!0,allowMaximize:!0,allowClose:!0,alwaysOnTop:!1};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);var o=this.construct.window();return e.bindWindowElement(o),e.move(n.location.x,n.location.y),e.resize(n.size.width,n.size.height),e.setIcon(n.icon),e.setTitle(n.title),e.setAllowMinimize(n.allowMinimize),e.setAllowMaximize(n.allowMaximize),e.setAllowClose(n.allowClose),e.setAlwaysOnTop(n.alwaysOnTop),this.windowContainer.appendChild(o),this.getActiveControllerSet().add(e),e.focus(),e},H.prototype.getSuggestedDocking=function(t,e){var n=this.windowContainer.getBoundingClientRect(),i=Math.round((t-n.left)/n.width*100),o=Math.round((e-n.top)/n.height*100);i=Math.min(Math.max(i,0),100),o=Math.min(Math.max(o,0),100);for(var s=O,r=0;r<s.length;r++){var a=s[r];if(i>=a.left&&i<=a.right&&o>=a.top&&o<=a.bottom)return a.name}return null},H.prototype.renderSuggestedDocking=function(t,e){var n=this.getSuggestedDocking(t,e),i=this.windowContainer.querySelector(".window-drag-overlay .dock-preview");if(null!==n){null===i&&((i=document.createElement("div")).classList.add("dock-preview"),i.appendChild(document.createElement("div")),this.windowContainer.querySelector(".window-drag-overlay").appendChild(i)),i.style.display="block";var o=R[n];i.style.top=o.top,i.style.left=o.left,i.style.width=o.width,i.style.height=o.height}else null!==i&&(i.style.display="none")};var I=H,F=(n(3),I);function Y(t,e){this.parent=t,this.title=e.title,this.image=e.image,this.open=e.open,this.x=0,this.y=0,this.element=null}Y.prototype.construct=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("img");t.classList.add("tile"),e.classList.add("title"),n.classList.add("image-container"),e.innerText=this.title,i.src=this.image,n.appendChild(i),t.appendChild(n),t.appendChild(e),this.element=t,this.applyPosition(),i.addEventListener("dblclick",this.open),e.addEventListener("dblclick",this.open);var o=this;return t.addEventListener("mousedown",(function(t){o.startDragDrop(t)})),t},Y.prototype.applyPosition=function(){this.element.style.top=this.y+"px",this.element.style.left=this.x+"px"},Y.prototype.startDragDrop=function(t){var e=this;this.parent.engine.start(t,{init:function(t){t.initialX=e.x,t.initialY=e.y},transform:function(t,n,i,o,s,r,a){if(r&&e.element.classList.contains("animate-position")&&e.element.classList.remove("animate-position"),e.x=t.initialX+n,e.y=t.initialY+i,e.applyPosition(),a&&e.parent.settings.grid.enforce){var l=e.parent.translateScreenToGrid(e.x,e.y),c=e.parent.translateGridToScreen(l.x,l.y);e.x=c.x,e.y=c.y,e.element.classList.add("animate-position"),e.applyPosition()}}})};var X=Y;function G(){this.selector=null,this.items=[],this.engine=new T,this.settings={grid:{enforce:!0,tile:{height:96,width:96,margin:16}}}}G.prototype.bind=function(t){this.selector=t},G.prototype.update=function(t){this.items=[];for(var e=0;e<t.length;e++)this.items.push(new X(this,t[e]));this.autoArrangeItems(),this.construct()},G.prototype.autoArrangeItems=function(){for(var t=Math.ceil(Math.sqrt(this.items.length)),e=0;e<this.items.length;e++){var n=e%t,i=Math.floor(e/t),o=this.translateGridToScreen(n,i);this.items[e].x=o.x,this.items[e].y=o.y}},G.prototype.translateGridToScreen=function(t,e){var n=this.settings.grid;return{x:(n.tile.width+2*n.tile.margin)*t+n.tile.margin,y:(n.tile.height+2*n.tile.margin)*e+n.tile.margin}},G.prototype.translateScreenToGrid=function(t,e){var n=this.settings.grid;return{x:+Math.round((t-n.tile.margin)/(n.tile.width+2*n.tile.margin)),y:+Math.round((e-n.tile.margin)/(n.tile.height+2*n.tile.margin))}},G.prototype.construct=function(){var t=document.querySelector(this.selector);t.innerHTML="";for(var e=0;e<this.items.length;e++)t.appendChild(this.items[e].construct())};var V=G,j=(n(4),V);window.Elara={WindowManager:F,Taskbar:a,Toolbar:g,TileView:j}}]);