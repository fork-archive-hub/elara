!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i={};var o={createSvgElement:function(e,t,n){var o=e+";"+t+"x"+n;if(void 0===i[o]){var r=document.createElement("div");return fetch(e).then((function(e){return e.text()})).then((function(e){var s=document.createElement("div");s.innerHTML=e;var l=s.querySelector("svg");l.removeAttribute("xmlns:a"),l.setAttribute("width",t+"px"),l.setAttribute("height",n+"px"),r.parentNode.replaceChild(l,r),i[o]=l})),r}return i[o].cloneNode(!0)}};function r(){this.taskbarElement=null,this.windowManager=null}r.prototype.bind=function(e,t){var n;this.taskbarElement=document.querySelector(e),this.taskbarElement.innerHTML="",this.windowManager=t,(n=document.createElement("div")).classList.add("elara-windows"),this.taskbarElement.appendChild(n),(n=document.createElement("div")).classList.add("elara-window-sets"),this.taskbarElement.appendChild(n);var i=this,o=function(){i.update()};this.windowManager.windowSetCollection.events.selectedChanged.subscribe(o),this.windowManager.windowSetCollection.events.added.subscribe((function(e,t){t.events.focusChanged.subscribe(o),t.events.changed.subscribe(o)})),this.windowManager.windowSetCollection.events.removed.subscribe((function(e,t){t.events.focusChanged.unsubscribe(o),t.events.changed.unsubscribe(o)}))},r.prototype.update=function(){var e=this.taskbarElement.querySelector(".elara-windows");e.innerHTML="";for(var t=this.windowManager.getActiveControllerSet().getOrdered(),n=0;n<t.length;n++){let l=t[n];var i=document.createElement("div"),r=document.createElement("span");i.className="elara-window-button",r.innerText=l.getTitle();var s=o.createSvgElement(l.getIcon(),16,16);i.appendChild(s),i.appendChild(r),e.appendChild(i),l.state.focus&&i.classList.add("window-focus"),i.addEventListener("click",(function(){l.focusFromTaskbar()}))}this.updateSetButton()},r.prototype.updateSetButton=function(){var e=this.taskbarElement.querySelector(".elara-window-sets");e.innerHTML="";for(var t=this.windowManager.windowSetCollection,n=t.count(),i=t.getSelected(),o=0;o<n;o++){let n=t.getAt(o);var r=document.createElement("div");r.classList.add("window-set"),r.innerText=o+1,n===i?r.classList.add("active"):r.addEventListener("click",(function(){t.select(n)})),e.appendChild(r)}};var s=r,l={};var a={createSvgElement:function(e,t,n){var i=e+";"+t+"x"+n;if(void 0===l[i]){var o=document.createElement("div");return fetch(e).then((function(e){return e.text()})).then((function(e){var r=document.createElement("div");r.innerHTML=e;var s=r.querySelector("svg");s.removeAttribute("xmlns:a"),s.setAttribute("width",t+"px"),s.setAttribute("height",n+"px"),o.parentNode.replaceChild(s,o),l[i]=s})),o}return l[i].cloneNode(!0)}};function c(){this.toolbarElement=null,this.zones=[],this.tray=[]}c.prototype.bind=function(e,t){this.toolbarElement=document.querySelector(e),this.toolbarElement.innerHTML="";var n=document.createElement("div");n.classList.add("elara-toolbar-buttons"),this.toolbarElement.appendChild(n)},c.prototype.addZone=function(e){this.zones.push(e),this.renderMenu()},c.prototype.renderMenu=function(){var e=this.toolbarElement.querySelector(".elara-toolbar-buttons");e.innerHTML="";for(var t=!1,n=0;n<this.zones.length;n++){var i=this.zones[n].getMenus();if(null!==i&&i.length>0){t&&e.appendChild(this.constructSeperator()),t=!0;for(var o=0;o<i.length;o++)e.appendChild(this.constructorDropdownButton(i[o]))}}},c.prototype.constructSeperator=function(){var e=document.createElement("div");return e.className="elara-seperator",e},c.prototype.constructorDropdownButton=function(e){var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");t.className="elara-dropdown-button",n.className="elara-button",n.innerText=e.title,i.className="elara-dropdown-items";var o=this;return n.addEventListener("click",(function(){o.open(t,e)})),t.appendChild(n),t.appendChild(i),t},c.prototype.constructButton=function(e){var t=document.createElement("div");t.className="elara-menu-button";var n=this;if(t.addEventListener("click",(function(){!0!==e.click()&&n.close()})),void 0!==e.icon){var i=document.createElement("div");i.className="elara-button-icon-container",i.appendChild(a.createSvgElement(e.icon,16,16)),t.appendChild(i)}var o=document.createElement("div");return o.className="elara-menu-button-label",o.innerText=e.title,t.appendChild(o),t},c.prototype.open=function(e,t){if(e.classList.contains("opened"))e.classList.remove("opened");else{this.close(),e.classList.add("opened");for(var n=e.querySelector(".elara-dropdown-items"),i=t.items,o=0;o<i.length;o++){var r=this.constructButton(i[o]);n.appendChild(r)}}},c.prototype.close=function(){for(var e=this.toolbarElement.querySelectorAll(".elara-dropdown-button"),t=0;t<e.length;t++){for(var n=e[t].querySelectorAll(".elara-dropdown-items"),i=0;i<n.length;i++)n[i].innerHTML="";e[t].classList.remove("opened")}},c.prototype.renderTray=function(){};var d=c;function u(e){this.name=e,this.dataSource=null}u.prototype.getMenus=function(){return null===this.dataSource?[{title:"["+this.name+"]",items:[]}]:this.dataSource()},u.prototype.setDataSource=function(e){this.dataSource=e};var h=u;function p(e){this.owner=e,this.subscribers=[]}p.prototype.subscribe=function(e){this.subscribers.push(e)},p.prototype.unsubscribe=function(e){var t=this.subscribers.indexOf(e);-1!==t&&this.subscribers.splice(t,1)},p.prototype.invoke=function(e){for(var t=0;t<this.subscribers.length;t++)this.subscribers[t](this.owner,e)};var m=p;function w(e){var t=this;if(t.value=e,t.unit=null,t.number=null,Number.isInteger(e))t.unit="px",t.number=e;else if(Number(e)===e&&e%1!=0)t.unit="px",t.number=Math.floor(e);else if(e.endsWith("px"))t.unit="px",t.number=+e.substring(0,e.length-2);else{if(!e.endsWith("%"))throw"Invalid value";t.unit="%",t.number=+e.substring(0,e.length-1)}t.raw=function(){return t.value},t.getPx=function(){if("px"===t.unit)return t.number;throw"The value does not have the unit: px."},t.cssValue=function(){return t.number+t.unit}}function f(e,t){this.x=e,this.y=t}function v(e,t,n){this.x=e,this.y=t,this.z=n}function g(){this.controllers=[],this.orderedControllers=[],this.focus=null,this.events={changed:new m(this),focusChanged:new m(this)}}g.prototype.add=function(e){this.controllers.push(e),this.orderedControllers.push(e);var t=this;e.events.closed.subscribe((function(){t.remove(e),t.events.changed.invoke()})),e.events.focus.subscribe((function(){t.setFocus(e)})),e.events.lostFocus.subscribe((function(){t.resetFocus()})),this.events.changed.invoke()},g.prototype.get=function(e){e=+e;for(var t=0;t<this.controllers.length;t++)if(this.controllers[t].getId()==e)return this.controllers[t];return null},g.prototype.stash=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].stash()},g.prototype.resume=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].resume()},g.prototype.remove=function(e){var t=this.controllers.indexOf(e);if(-1===t)throw"Window controller not found.";var n=this.orderedControllers.indexOf(e);if(-1===n)throw"Window controller not found.";this.controllers.splice(t,1),this.orderedControllers.splice(n,1),this.events.changed.invoke()},g.prototype.getOrdered=function(){return this.orderedControllers},g.prototype.getMaximumForPositionZ=function(){for(var e=-1,t=0;t<this.controllers.length;t++){var n=this.controllers[t].position.z;n>e&&(e=n)}return e},g.prototype.setFocus=function(e){this.focus=e,this.controllers.sort((function(t,n){return t==e?1:n==e?-1:t.position.z-n.position.z}));for(var t=0;t<this.controllers.length;t++)this.controllers[t].position.z=new w(t),this.controllers[t].applyDimensions();var n=!1;for(t=0;t<this.controllers.length;t++)this.controllers[t].state.focus&&(this.controllers[t].state.focus=!1,this.controllers[t].applyState(),n=!0);e.state.focus||(e.state.focus=!0,e.applyState(),n=!0),n&&this.events.focusChanged.invoke()},g.prototype.resetFocus=function(e){this.focus=null;for(var t=!1,n=0;n<this.controllers.length;n++)this.controllers[n].state.focus&&(this.controllers[n].state.focus=!1,this.controllers[n].applyState(),t=!0);t&&this.events.focusChanged.invoke()},g.prototype.getCurrentFocus=function(e){return this.focus},g.prototype.cascade=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].show(),this.controllers[e].move(100+50*e,100+50*e)},g.prototype.minimizeAll=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].minimize()},g.prototype.showAll=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].show()},g.prototype.maximizeAll=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].show(),this.controllers[e].maximize()},g.prototype.split=function(){for(var e=0;e<this.controllers.length;e++)this.controllers[e].show();var t=this.controllers.length;if(0!==t)if(1===t)this.controllers[0].resize("fullscreen");else if(2===t)this.controllers[0].resize("left"),this.controllers[1].resize("right");else if(3===t)this.controllers[0].resize("top-left"),this.controllers[1].resize("top-right"),this.controllers[2].resize("bottom");else if(t>3){var n=this.controllers.reverse();n[0].resize("top-left"),n[1].resize("top-right"),n[2].resize("bottom-left"),n[3].resize("bottom-right");for(e=4;e<t;e++)n[e].hide()}};var y=g;function b(){this.sets=[],this.selected=null,this.events={selectedChanged:new m(this),added:new m(this),removed:new m(this)}}b.prototype.getSelected=function(){return this.selected},b.prototype.getAt=function(e){return this.sets[e]},b.prototype.add=function(){var e=new y;this.sets.push(e),this.events.added.invoke(e)},b.prototype.select=function(e){if(-1===this.sets.indexOf(e))throw"Set not found";null!==this.selected&&this.selected.stash(),this.selected=e,this.selected.resume(),this.events.selectedChanged.invoke()},b.prototype.selectAt=function(e){null!==this.selected&&this.selected.stash(),this.selected=this.sets[e],this.selected.resume(),this.events.selectedChanged.invoke()},b.prototype.count=function(){return this.sets.length};var z=b;var C=function(){var e=this;e.session=null,e.start=function(t,n){var i={target:t.target,initialPageX:t.pageX,initialPageY:t.pageY,first:!0,transform:n.transform};return n.init(i),e.session=i,window.addEventListener("mousemove",e.moveHandler,!0),window.addEventListener("mouseup",e.moveUpHandler,!1),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},e.hasSession=function(){return null!==e.session},e.moveHandler=function(t){var n=t.pageX-e.session.initialPageX,i=t.pageY-e.session.initialPageY;return e.session.transform(e.session,n,i,t.pageX,t.pageY,e.session.first,!1),e.session.first=!1,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},e.moveUpHandler=function(t){window.removeEventListener("mousemove",e.moveHandler,!0),window.removeEventListener("mouseup",e.moveUpHandler,!1);var n=t.pageX-e.session.initialPageX,i=t.pageY-e.session.initialPageY;e.session.transform(e.session,n,i,t.pageX,t.pageY,e.session.first,!0),e.session=null}};var E=function(e){var t=this;t.engine=new C,t.onTitlebarGrab=function(n){t.engine.start(n,{init:function(t){t.window=t.target.closest(".elara-window"),t.controller=e.getController(t.window.getAttribute("data-controller-id"));var n=e.windowContainer.getBoundingClientRect(),i=t.window.getBoundingClientRect();t.initialWindowLeft=i.left-n.left,t.initialWindowTop=i.top-n.top},transform:function(t,n,i,o,r,s,l){s&&(e.windowContainer.classList.add("window-dragging-active"),t.controller.state.moving=!0,t.controller.applyState(),t.controller.focus(),t.window.style["z-index"]=2e3);var a=t.initialWindowLeft+n,c=t.initialWindowTop+i;if(t.controller.move(a,c),l){var d=e.getSuggestedDocking(o,r);null!=d?t.controller.resize(d):t.controller.move(a,c),e.windowContainer.classList.remove("window-dragging-active"),t.controller.state.moving=!1,t.controller.applyState()}else t.controller.state.relative&&t.controller.setRelative(!1),e.renderSuggestedDocking(o,r)}})},t.resizeZoneSize=32,t.determineResizeCursor=function(e,t){if("resize"===e&&"resize"==t||"move"===e&&"move"==t)return"nw-resize";if("resize"===e&&"move"==t||"move"===e&&"resize"==t)return"ne-resize";if("none"!==e&&"none"===t)return"e-resize";if("none"===e&&"none"!==t)return"n-resize";throw"invalid input"},t.determineModes=function(e,n,i,o){t.resizeZoneSize;var r="none",s="none";return e<16?r="move":i-e<16&&(r="resize"),n<16?s="move":o-n<16&&(s="resize"),{hmode:r,vmode:s}},t.onWindowGrab=function(n){t.engine.start(n,{init:function(i){i.window=i.target.closest(".elara-window"),i.controller=e.getController(i.window.getAttribute("data-controller-id"));var o=e.windowContainer.getBoundingClientRect(),r=i.window.getBoundingClientRect();i.initialWindowX=r.left-o.left,i.initialWindowY=r.top-o.top,i.initialWidth=i.controller.size.x.getPx(),i.initialHeight=i.controller.size.y.getPx();var s=n.pageX-r.left,l=n.pageY-r.top,a=t.determineModes(s,l,r.width,r.height);i.hmode=a.hmode,i.vmode=a.vmode,i.window.style.cursor=t.determineResizeCursor(i.hmode,i.vmode)},transform:function(t,n,i,o,r,s,l){s&&(e.windowContainer.classList.add("window-resize-active"),t.controller.state.resizing=!0,t.controller.applyState(),t.controller.focus(),t.window.style["z-index"]=2e3);var a=t.initialWindowX,c=t.initialWindowY,d=t.initialWidth,u=t.initialHeight;"resize"===t.hmode?d+=n:"move"===t.hmode&&(a+=n,d-=n),"resize"===t.vmode?u+=i:"move"===t.vmode&&(c+=i,u-=i),d<0&&(d=0),u<0&&(u=0),t.controller.move(a,c),t.controller.resize(d,u),l&&(t.controller.state.resizing=!1,t.controller.applyState(),e.windowContainer.classList.remove("window-resize-active"))}})},t.init=function(){document.addEventListener("mousedown",(function(n){if(n.target.classList.contains("elara-title-bar")||n.target.classList.contains("elara-title"))t.onTitlebarGrab(n);else if(n.target.classList.contains("elara-window"))t.onWindowGrab(n);else for(var i=0;i<n.path.length;i++)if(void 0!==n.path[i].classList&&n.path[i].classList.contains("elara-window")){var o=e.getController(n.path[i].getAttribute("data-controller-id"));return void(o.state.focus||o.focus())}})),document.addEventListener("mousemove",(function(e){if(void 0!==e.target.classList&&e.target.classList.contains("elara-window")&&!t.engine.hasSession()){var n=e.target,i=n.getBoundingClientRect(),o=e.pageX-i.left,r=e.pageY-i.top,s=t.determineModes(o,r,i.width,i.height);n.style.cursor=t.determineResizeCursor(s.hmode,s.vmode)}}))}};var S=function(){var e=this;e.window=function(){var t=e.titleBar(),n=e.content(),i=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div");return i.className="elara-window",o.className="elara-window-visible",r.className="elara-window-overlay",i.appendChild(o),o.appendChild(t),o.appendChild(n),o.appendChild(r),i},e.titleBar=function(){var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");t.className="elara-title-bar",n.className="elara-title",i.className="elara-icon-container";var o=e.controlbox();return t.appendChild(i),t.appendChild(n),t.appendChild(o),t},e.controlbox=function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return e.className="elara-control-button minimize",t.className="elara-control-button maximize",n.className="elara-control-button close",i.className="elara-control-box",i.appendChild(e),i.appendChild(t),i.appendChild(n),i},e.content=function(){var e=document.createElement("div");return e.className="elara-window-content",e}},x={fullscreen:{top:0,left:0,width:"100%",height:"100%"},"top-left":{top:0,left:0,width:"50%",height:"50%"},"top-right":{top:0,left:"50%",width:"50%",height:"50%"},"bottom-left":{top:"50%",left:0,width:"50%",height:"50%"},"bottom-right":{top:"50%",left:"50%",width:"50%",height:"50%"},left:{top:0,left:0,width:"50%",height:"100%"},right:{top:0,left:"50%",width:"50%",height:"100%"},top:{top:0,left:0,width:"100%",height:"50%"},bottom:{top:"50%",left:0,width:"100%",height:"50%"}},M={};var L={createSvgElement:function(e,t,n){var i=e+";"+t+"x"+n;if(void 0===M[i]){var o=document.createElement("div");return fetch(e).then((function(e){return e.text()})).then((function(e){var r=document.createElement("div");r.innerHTML=e;var s=r.querySelector("svg");s.removeAttribute("xmlns:a"),s.setAttribute("width",t+"px"),s.setAttribute("height",n+"px"),o.parentNode.replaceChild(s,o),M[i]=s})),o}return M[i].cloneNode(!0)}};function T(e){this.id=e,this.nonRelativeDimensions=null,this.icon=null,this.title=null,this.position=new v(new w(0),new w(0),new w(0)),this.size=new f(new w(0),new w(0)),this.state={hidden:!1,relative:!1,moving:!1,resizing:!1,focus:!1,stashed:!1,allowMinimize:!0,allowMaximize:!0,allowClose:!0,alwaysOnTop:!1},this.windowElement=null,this.events={closed:new m(this),focus:new m(this),lostFocus:new m(this)}}T.prototype.applyDimensions=function(){null!==this.windowElement&&(this.windowElement.style.left=this.position.x.cssValue(),this.windowElement.style.top=this.position.y.cssValue(),this.windowElement.style["z-index"]=this.position.z.raw(),this.windowElement.style.width=this.size.x.cssValue(),this.windowElement.style.height=this.size.y.cssValue())},T.prototype.applyState=function(){var e=this;function t(t,n,i){e.state[t]!==i?e.windowElement.classList.contains(n)||e.windowElement.classList.add(n):e.windowElement.classList.contains(n)&&e.windowElement.classList.remove(n)}null!==this.windowElement&&(t("hidden","elara-window-hidden",!1),t("relative","elara-window-relative",!1),t("moving","elara-window-moving",!1),t("resizing","elara-window-resizing",!1),t("focus","elara-window-focus",!1),t("stashed","elara-window-stashed",!1),t("allowMinimize","elara-window-disable-minimize",!0),t("allowMaximize","elara-window-disable-maximize",!0),t("allowClose","elara-window-disable-close",!0),t("alwaysOnTop","elara-window-always-on-top",!1))},T.prototype.setRelative=function(e){this.state.relative!=e&&(this.state.relative=e,this.applyState(),e?this.setNonRelativeDimensions(this.position.x.raw(),this.position.y.raw(),this.size.x.raw(),this.size.y.raw()):this.restoreNonRelativeDimensions())},T.prototype.show=function(){this.state.hidden=!1,this.applyState()},T.prototype.minimize=function(){this.state.hidden=!0,this.applyState(),this.hasFocus()&&this.events.lostFocus.invoke()},T.prototype.setTitle=function(e){this.title=e,this.windowElement.querySelector(".elara-title").innerText=e},T.prototype.getTitle=function(){return this.title},T.prototype.getContentContainer=function(){return this.windowElement.querySelector(".elara-window-content")},T.prototype.toggleMaximize=function(){this.state.relative?this.setRelative(!1):this.resize("fullscreen")},T.prototype.getId=function(){return this.id},T.prototype.getWindow=function(){return this.windowElement},T.prototype.bindWindowElement=function(e){var t=this;e.querySelector(".elara-control-button.minimize").addEventListener("click",(function(){t.minimize()})),e.querySelector(".elara-control-button.maximize").addEventListener("click",(function(){t.maximize()})),e.querySelector(".elara-control-button.close").addEventListener("click",(function(){t.close()})),e.querySelector(".elara-title-bar").addEventListener("dblclick",(function(){t.toggleMaximize()})),e.setAttribute("data-controller-id",this.getId()),this.windowElement=e,this.applyDimensions(),this.applyState()},T.prototype.maximize=function(){this.resize("fullscreen")},T.prototype.close=function(){this.windowElement.parentElement.removeChild(this.windowElement),this.events.closed.invoke()},T.prototype.getIcon=function(){return this.icon},T.prototype.setIcon=function(e){if(this.icon!==e){this.icon=e;var t=this.windowElement.querySelector(".elara-icon-container");t.innerHTML="",t.appendChild(L.createSvgElement(this.icon,16,16))}},T.prototype.setNonRelativeDimensions=function(e,t,n,i){this.nonRelativeDimensions=null===e?null:{x:e,y:t,width:n,height:i}},T.prototype.restoreNonRelativeSize=function(){null!==this.nonRelativeDimensions&&(this.resize(this.nonRelativeDimensions.width,this.nonRelativeDimensions.height),this.nonRelativeDimensions=null)},T.prototype.restoreNonRelativePosition=function(){null!==this.nonRelativeDimensions&&(this.move(this.nonRelativeDimensions.x,this.nonRelativeDimensions.y),this.nonRelativeDimensions=null)},T.prototype.restoreNonRelativeDimensions=function(){if(null!==this.nonRelativeDimensions){var e=this.nonRelativeDimensions;this.move(e.x,e.y),this.resize(e.width,e.height),this.nonRelativeDimensions=null}},T.prototype.hasFocus=function(){return this.windowElement.classList.contains("elara-window-focus")},T.prototype.focus=function(){this.events.focus.invoke()},T.prototype.focusFromTaskbar=function(){this.hasFocus()?this.minimize():(this.show(),this.focus())},T.prototype.move=function(e,t){this.position.x=new w(e),this.position.y=new w(t),this.state.hidden=!1,this.applyDimensions(),this.applyState()},T.prototype.resize=function(e,t){if("string"==typeof e){var n=e;this.setRelative(!0);var i=x[n];this.position.x=new w(i.left),this.position.y=new w(i.top),this.size.x=new w(i.width),this.size.y=new w(i.height),this.applyDimensions()}else this.size.x=new w(e),this.size.y=new w(t),this.applyDimensions()},T.prototype.stash=function(){this.state.stashed=!0,this.applyState()},T.prototype.resume=function(){this.state.stashed=!1,this.applyState()},T.prototype.setAllowMinimize=function(e){this.state.allowMinimize!==e&&(this.state.allowMinimize=e,this.applyState())},T.prototype.setAllowMaximize=function(e){this.state.allowMaximize!==e&&(this.state.allowMaximize=e,this.applyState())},T.prototype.setAllowClose=function(e){this.state.allowClose!==e&&(this.state.allowClose=e,this.applyState())},T.prototype.setAlwaysOnTop=function(e){this.state.alwaysOnTop!==e&&(this.state.alwaysOnTop=e,this.applyState())};var k=T,D=[{left:0,right:1,top:0,bottom:1,name:"top-left"},{left:99,right:100,top:0,bottom:1,name:"top-right"},{left:0,right:1,top:99,bottom:100,name:"bottom-left"},{left:99,right:100,top:99,maxY:100,name:"bottom-right"},{left:0,right:100,top:0,bottom:1,name:"fullscreen"},{left:0,right:1,top:0,bottom:100,name:"left"},{left:99,right:100,top:0,bottom:100,name:"right"},{left:0,right:100,top:99,bottom:100,name:"bottom"}];function N(){this.windowContainer=null,this.windowSetCollection=new z,this.dragging=new E(this),this.construct=new S;var e=1;this.getNextId=function(){return e++}}N.prototype.bind=function(e){this.windowContainer=document.querySelector(e),this.windowContainer.innerHTML="";var t=document.createElement("div");t.classList.add("window-drag-overlay"),this.windowContainer.appendChild(t),this.dragging.init()},N.prototype.getController=function(e){for(var t=this.windowSetCollection.count(),n=0;n<t;n++){var i=this.windowSetCollection.getAt(n).get(e);if(null!==i)return i}return null},N.prototype.getActiveControllerSet=function(){return 0===this.windowSetCollection.count()&&(this.windowSetCollection.add(),this.windowSetCollection.selectAt(0)),this.windowSetCollection.getSelected()},N.prototype.createIFrameWindow=function(e,t){var n=this.createWindow(t),i=n.getContentContainer(),o=document.createElement("iframe");return o.src=e,i.appendChild(o),o.onload=function(){n.setTitle(o.contentDocument.title)},n.iframe=o,n},N.prototype.createWindow=function(e){var t=new k(this.getNextId()),n={title:"-",size:{width:600,height:400},location:{x:100,y:100},icon:null,allowMinimize:!0,allowMaximize:!0,allowClose:!0,alwaysOnTop:!1};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);var o=this.construct.window();return t.bindWindowElement(o),t.move(n.location.x,n.location.y),t.resize(n.size.width,n.size.height),t.setIcon(n.icon),t.setTitle(n.title),t.setAllowMinimize(n.allowMinimize),t.setAllowMaximize(n.allowMaximize),t.setAllowClose(n.allowClose),t.setAlwaysOnTop(n.alwaysOnTop),this.windowContainer.appendChild(o),this.getActiveControllerSet().add(t),t.focus(),t},N.prototype.getSuggestedDocking=function(e,t){var n=this.windowContainer.getBoundingClientRect(),i=Math.round((e-n.left)/n.width*100),o=Math.round((t-n.top)/n.height*100);i=Math.min(Math.max(i,0),100),o=Math.min(Math.max(o,0),100);for(var r=D,s=0;s<r.length;s++){var l=r[s];if(i>=l.left&&i<=l.right&&o>=l.top&&o<=l.bottom)return l.name}return null},N.prototype.renderSuggestedDocking=function(e,t){var n=this.getSuggestedDocking(e,t),i=this.windowContainer.querySelector(".window-drag-overlay .dock-preview");if(null!==n){null===i&&((i=document.createElement("div")).classList.add("dock-preview"),i.appendChild(document.createElement("div")),this.windowContainer.querySelector(".window-drag-overlay").appendChild(i)),i.style.display="block";var o=x[n];i.style.top=o.top,i.style.left=o.left,i.style.width=o.width,i.style.height=o.height}else null!==i&&(i.style.display="none")};var A=N;n(0),n(1),n(2),n(3);window.WindowManager=A,window.Taskbar=s,window.ElaraToolbar=d,window.ElaraToolbarZone=h}]);