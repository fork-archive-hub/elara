!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);var i={};var o={createSvgElement:function(t,e,n){var o=t+";"+e+"x"+n;if(void 0===i[o]){var r=document.createElement("div");return fetch(t).then((function(t){return t.text()})).then((function(t){var s=document.createElement("div");s.innerHTML=t;var l=s.querySelector("svg");l.removeAttribute("xmlns:a"),l.setAttribute("width",e+"px"),l.setAttribute("height",n+"px"),r.parentNode.replaceChild(l,r),i[o]=l})),r}return i[o].cloneNode(!0)}};function r(){this.taskbarElement=null,this.windowManager=null}r.prototype.bind=function(t,e){var n;this.taskbarElement=document.querySelector(t),this.taskbarElement.innerHTML="",this.windowManager=e,(n=document.createElement("div")).classList.add("elara-windows"),this.taskbarElement.appendChild(n),(n=document.createElement("div")).classList.add("elara-window-sets"),this.taskbarElement.appendChild(n);var i=this,o=function(){i.update()};this.windowManager.windowSetCollection.events.selectedChanged.subscribe(o),this.windowManager.windowSetCollection.events.added.subscribe((function(t,e){e.events.focusChanged.subscribe(o),e.events.changed.subscribe(o)})),this.windowManager.windowSetCollection.events.removed.subscribe((function(t,e){e.events.focusChanged.unsubscribe(o),e.events.changed.unsubscribe(o)}));for(var r=0;r<this.windowManager.windowSetCollection.count();r++){var s=this.windowManager.windowSetCollection.getAt(r);s.events.focusChanged.subscribe(o),s.events.changed.subscribe(o)}},r.prototype.update=function(){var t=this.taskbarElement.querySelector(".elara-windows");t.innerHTML="";for(var e=this.windowManager.getActiveControllerSet().getOrdered(),n=0;n<e.length;n++){let l=e[n];var i=document.createElement("div"),r=document.createElement("span");i.className="elara-window-button",r.innerText=l.getTitle();var s=o.createSvgElement(l.getIcon(),16,16);i.appendChild(s),i.appendChild(r),t.appendChild(i),l.state.focus&&i.classList.add("window-focus"),i.addEventListener("click",(function(){l.focusFromTaskbar()}))}this.updateSetButton()},r.prototype.updateSetButton=function(){var t=this.taskbarElement.querySelector(".elara-window-sets");t.innerHTML="";for(var e=this.windowManager.windowSetCollection,n=e.count(),i=e.getSelected(),o=0;o<n;o++){let n=e.getAt(o);var r=document.createElement("div");r.classList.add("window-set"),r.innerText=o+1,n===i?r.classList.add("active"):r.addEventListener("click",(function(){e.select(n)})),t.appendChild(r)}};var s=r,l=(n(1),s),a={};var c={createSvgElement:function(t,e,n){var i=t+";"+e+"x"+n;if(void 0===a[i]){var o=document.createElement("div");return fetch(t).then((function(t){return t.text()})).then((function(t){var r=document.createElement("div");r.innerHTML=t;var s=r.querySelector("svg");s.removeAttribute("xmlns:a"),s.setAttribute("width",e+"px"),s.setAttribute("height",n+"px"),o.parentNode.replaceChild(s,o),a[i]=s})),o}return a[i].cloneNode(!0)}};function d(t){this.name=t,this.dataSource=null}d.prototype.getMenus=function(){return null===this.dataSource?[{title:"["+this.name+"]",items:[]}]:this.dataSource()},d.prototype.setDataSource=function(t){this.dataSource=t};var h=d;function u(){this.toolbarElement=null,this.zones=[],this.tray=[]}u.prototype.bind=function(t,e){this.toolbarElement=document.querySelector(t),this.toolbarElement.innerHTML="";var n=document.createElement("div");n.classList.add("elara-toolbar-buttons"),this.toolbarElement.appendChild(n)},u.prototype.addZone=function(t){var e=new h(t);return this.zones.push(e),this.renderMenu(),e},u.prototype.renderMenu=function(){var t=this.toolbarElement.querySelector(".elara-toolbar-buttons");t.innerHTML="";for(var e=!1,n=0;n<this.zones.length;n++){var i=this.zones[n].getMenus();if(null!==i&&i.length>0){e&&t.appendChild(this.constructSeperator()),e=!0;for(var o=0;o<i.length;o++)t.appendChild(this.constructorDropdownButton(i[o]))}}},u.prototype.constructSeperator=function(){var t=document.createElement("div");return t.className="elara-seperator",t},u.prototype.constructorDropdownButton=function(t){var e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");e.className="elara-dropdown-button",n.className="elara-button",n.innerText=t.title,i.className="elara-dropdown-items";var o=this;return n.addEventListener("click",(function(){o.open(e,t)})),e.appendChild(n),e.appendChild(i),e},u.prototype.constructButton=function(t){var e=document.createElement("div");e.className="elara-menu-button";var n=this;if(e.addEventListener("click",(function(){!0!==t.click()&&n.close()})),void 0!==t.icon){var i=document.createElement("div");i.className="elara-button-icon-container",i.appendChild(c.createSvgElement(t.icon,16,16)),e.appendChild(i)}var o=document.createElement("div");return o.className="elara-menu-button-label",o.innerText=t.title,e.appendChild(o),e},u.prototype.open=function(t,e){if(t.classList.contains("opened"))t.classList.remove("opened");else{this.close(),t.classList.add("opened");for(var n=t.querySelector(".elara-dropdown-items"),i=e.items,o=0;o<i.length;o++){var r=this.constructButton(i[o]);n.appendChild(r)}}},u.prototype.close=function(){for(var t=this.toolbarElement.querySelectorAll(".elara-dropdown-button"),e=0;e<t.length;e++){for(var n=t[e].querySelectorAll(".elara-dropdown-items"),i=0;i<n.length;i++)n[i].innerHTML="";t[e].classList.remove("opened")}},u.prototype.renderTray=function(){};var p=u,m=(n(2),p);function w(t){this.owner=t,this.subscribers=[]}w.prototype.subscribe=function(t){this.subscribers.push(t)},w.prototype.unsubscribe=function(t){var e=this.subscribers.indexOf(t);-1!==e&&this.subscribers.splice(e,1)},w.prototype.invoke=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e](this.owner,t)};var f=w;function v(t){var e=this;if(e.value=t,e.unit=null,e.number=null,Number.isInteger(t))e.unit="px",e.number=t;else if(Number(t)===t&&t%1!=0)e.unit="px",e.number=Math.floor(t);else if(t.endsWith("px"))e.unit="px",e.number=+t.substring(0,t.length-2);else{if(!t.endsWith("%"))throw"Invalid value";e.unit="%",e.number=+t.substring(0,t.length-1)}e.raw=function(){return e.value},e.getPx=function(){if("px"===e.unit)return e.number;throw"The value does not have the unit: px."},e.cssValue=function(){return e.number+e.unit}}function g(t,e){this.x=t,this.y=e}function y(t,e,n){this.x=t,this.y=e,this.z=n}function b(){this.controllers=[],this.orderedControllers=[],this.focus=null,this.events={changed:new f(this),focusChanged:new f(this)}}b.prototype.add=function(t){this.controllers.push(t),this.orderedControllers.push(t);var e=this;t.events.closed.subscribe((function(){e.remove(t),e.events.changed.invoke()})),t.events.focus.subscribe((function(){e.setFocus(t)})),t.events.lostFocus.subscribe((function(){e.resetFocus()})),this.events.changed.invoke()},b.prototype.get=function(t){t=+t;for(var e=0;e<this.controllers.length;e++)if(this.controllers[e].getId()==t)return this.controllers[e];return null},b.prototype.stash=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].stash()},b.prototype.resume=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].resume()},b.prototype.remove=function(t){var e=this.controllers.indexOf(t);if(-1===e)throw"Window controller not found.";var n=this.orderedControllers.indexOf(t);if(-1===n)throw"Window controller not found.";this.controllers.splice(e,1),this.orderedControllers.splice(n,1),this.events.changed.invoke()},b.prototype.getOrdered=function(){return this.orderedControllers},b.prototype.getMaximumForPositionZ=function(){for(var t=-1,e=0;e<this.controllers.length;e++){var n=this.controllers[e].position.z;n>t&&(t=n)}return t},b.prototype.setFocus=function(t){this.focus=t,this.controllers.sort((function(e,n){return e==t?1:n==t?-1:e.position.z-n.position.z}));for(var e=0;e<this.controllers.length;e++)this.controllers[e].position.z=new v(e),this.controllers[e].applyDimensions();var n=!1;for(e=0;e<this.controllers.length;e++)this.controllers[e].state.focus&&(this.controllers[e].state.focus=!1,this.controllers[e].applyState(),n=!0);t.state.focus||(t.state.focus=!0,t.applyState(),n=!0),n&&this.events.focusChanged.invoke()},b.prototype.resetFocus=function(t){this.focus=null;for(var e=!1,n=0;n<this.controllers.length;n++)this.controllers[n].state.focus&&(this.controllers[n].state.focus=!1,this.controllers[n].applyState(),e=!0);e&&this.events.focusChanged.invoke()},b.prototype.getCurrentFocus=function(t){return this.focus},b.prototype.cascade=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show(),this.controllers[t].move(100+50*t,100+50*t)},b.prototype.minimizeAll=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].minimize()},b.prototype.showAll=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show()},b.prototype.maximizeAll=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show(),this.controllers[t].maximize()},b.prototype.split=function(){for(var t=0;t<this.controllers.length;t++)this.controllers[t].show();var e=this.controllers.length;if(0!==e)if(1===e)this.controllers[0].resize("fullscreen");else if(2===e)this.controllers[0].resize("left"),this.controllers[1].resize("right");else if(3===e)this.controllers[0].resize("top-left"),this.controllers[1].resize("top-right"),this.controllers[2].resize("bottom");else if(e>3){var n=this.controllers.reverse();n[0].resize("top-left"),n[1].resize("top-right"),n[2].resize("bottom-left"),n[3].resize("bottom-right");for(t=4;t<e;t++)n[t].hide()}};var C=b;function z(){this.sets=[],this.selected=null,this.events={selectedChanged:new f(this),added:new f(this),removed:new f(this)}}z.prototype.getSelected=function(){return this.selected},z.prototype.getAt=function(t){return this.sets[t]},z.prototype.add=function(){var t=new C;this.sets.push(t),this.events.added.invoke(t)},z.prototype.select=function(t){if(-1===this.sets.indexOf(t))throw"Set not found";null!==this.selected&&this.selected.stash(),this.selected=t,this.selected.resume(),this.events.selectedChanged.invoke()},z.prototype.selectAt=function(t){null!==this.selected&&this.selected.stash(),this.selected=this.sets[t],this.selected.resume(),this.events.selectedChanged.invoke()},z.prototype.count=function(){return this.sets.length};var x=z;var E=function(){var t=this;t.session=null,t.start=function(e,n){var i={target:e.target,initialPageX:e.pageX,initialPageY:e.pageY,first:!0,transform:n.transform};return n.init(i),t.session=i,window.addEventListener("mousemove",t.moveHandler,!0),window.addEventListener("mouseup",t.moveUpHandler,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1},t.hasSession=function(){return null!==t.session},t.moveHandler=function(e){var n=e.pageX-t.session.initialPageX,i=e.pageY-t.session.initialPageY;return t.session.transform(t.session,n,i,e.pageX,e.pageY,t.session.first,!1),t.session.first=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1},t.moveUpHandler=function(e){window.removeEventListener("mousemove",t.moveHandler,!0),window.removeEventListener("mouseup",t.moveUpHandler,!1);var n=e.pageX-t.session.initialPageX,i=e.pageY-t.session.initialPageY;t.session.transform(t.session,n,i,e.pageX,e.pageY,t.session.first,!0),t.session=null}};function S(t){this.windowManager=t,this.engine=new E,this.resizeZoneSize=16}S.prototype.onTitlebarGrab=function(t){var e=this;e.engine.start(t,{init:function(t){t.window=t.target.closest(".elara-window"),t.controller=e.windowManager.getController(t.window.getAttribute("data-controller-id"));var n=e.windowManager.windowContainer.getBoundingClientRect(),i=t.window.getBoundingClientRect();t.initialWindowLeft=i.left-n.left,t.initialWindowTop=i.top-n.top},transform:function(t,n,i,o,r,s,l){s&&(e.windowManager.windowContainer.classList.add("window-dragging-active"),t.controller.state.moving=!0,t.controller.applyState(),t.controller.focus(),t.window.style["z-index"]=2e3);var a=t.initialWindowLeft+n,c=t.initialWindowTop+i;if(t.controller.move(a,c),l){var d=e.windowManager.getSuggestedDocking(o,r);null!=d?t.controller.resize(d):t.controller.move(a,c),e.windowManager.windowContainer.classList.remove("window-dragging-active"),t.controller.state.moving=!1,t.controller.applyState()}else t.controller.state.relative&&t.controller.setRelative(!1),e.windowManager.renderSuggestedDocking(o,r)}})},S.prototype.determineResizeCursor=function(t,e){if("resize"===t&&"resize"==e||"move"===t&&"move"==e)return"nw-resize";if("resize"===t&&"move"==e||"move"===t&&"resize"==e)return"ne-resize";if("none"!==t&&"none"===e)return"e-resize";if("none"===t&&"none"!==e)return"n-resize";throw"invalid input"},S.prototype.determineModes=function(t,e,n,i){var o=this.resizeZoneSize,r="none",s="none";return t<16?r="move":n-t<o&&(r="resize"),e<o?s="move":i-e<o&&(s="resize"),{hmode:r,vmode:s}},S.prototype.onWindowGrab=function(t){var e=this;e.engine.start(t,{init:function(n){n.window=n.target.closest(".elara-window"),n.controller=e.windowManager.getController(n.window.getAttribute("data-controller-id"));var i=e.windowManager.windowContainer.getBoundingClientRect(),o=n.window.getBoundingClientRect();n.initialWindowX=o.left-i.left,n.initialWindowY=o.top-i.top,n.initialWidth=n.controller.size.x.getPx(),n.initialHeight=n.controller.size.y.getPx();var r=t.pageX-o.left,s=t.pageY-o.top,l=e.determineModes(r,s,o.width,o.height);n.hmode=l.hmode,n.vmode=l.vmode,n.window.style.cursor=e.determineResizeCursor(n.hmode,n.vmode)},transform:function(t,n,i,o,r,s,l){s&&(e.windowManager.windowContainer.classList.add("window-resize-active"),t.controller.state.resizing=!0,t.controller.applyState(),t.controller.focus(),t.window.style["z-index"]=2e3);var a=t.initialWindowX,c=t.initialWindowY,d=t.initialWidth,h=t.initialHeight;"resize"===t.hmode?d+=n:"move"===t.hmode&&(a+=n,d-=n),"resize"===t.vmode?h+=i:"move"===t.vmode&&(c+=i,h-=i),d<0&&(d=0),h<0&&(h=0),t.controller.move(a,c),t.controller.resize(d,h),l&&(t.controller.state.resizing=!1,t.controller.applyState(),e.windowManager.windowContainer.classList.remove("window-resize-active"))}})},S.prototype.init=function(){var t=this;document.addEventListener("mousedown",(function(e){if(e.target.classList.contains("elara-title-bar")||e.target.classList.contains("elara-title"))t.onTitlebarGrab(e);else if(e.target.classList.contains("elara-window"))t.onWindowGrab(e);else for(var n=0;n<e.path.length;n++)if(void 0!==e.path[n].classList&&e.path[n].classList.contains("elara-window")){var i=t.windowManager.getController(e.path[n].getAttribute("data-controller-id"));return void(i.state.focus||i.focus())}})),document.addEventListener("mousemove",(function(e){if(void 0!==e.target.classList&&e.target.classList.contains("elara-window")&&!t.engine.hasSession()){var n=e.target,i=n.getBoundingClientRect(),o=e.pageX-i.left,r=e.pageY-i.top,s=t.determineModes(o,r,i.width,i.height);n.style.cursor=t.determineResizeCursor(s.hmode,s.vmode)}}))};var M=S;function L(){}L.prototype.window=function(){var t=this.titleBar(),e=this.content(),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div");return n.className="elara-window",i.className="elara-window-visible",o.className="elara-window-overlay",n.appendChild(i),i.appendChild(t),i.appendChild(e),i.appendChild(o),n},L.prototype.titleBar=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div");t.className="elara-title-bar",e.className="elara-title",n.className="elara-icon-container";var i=this.controlbox();return t.appendChild(n),t.appendChild(e),t.appendChild(i),t},L.prototype.controlbox=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return t.className="elara-control-button minimize",e.className="elara-control-button maximize",n.className="elara-control-button close",i.className="elara-control-box",i.appendChild(t),i.appendChild(e),i.appendChild(n),i},L.prototype.content=function(){var t=document.createElement("div");return t.className="elara-window-content",t};var T=L,k={fullscreen:{top:0,left:0,width:"100%",height:"100%"},"top-left":{top:0,left:0,width:"50%",height:"50%"},"top-right":{top:0,left:"50%",width:"50%",height:"50%"},"bottom-left":{top:"50%",left:0,width:"50%",height:"50%"},"bottom-right":{top:"50%",left:"50%",width:"50%",height:"50%"},left:{top:0,left:0,width:"50%",height:"100%"},right:{top:0,left:"50%",width:"50%",height:"100%"},top:{top:0,left:0,width:"100%",height:"50%"},bottom:{top:"50%",left:0,width:"100%",height:"50%"}},D={};var A={createSvgElement:function(t,e,n){var i=t+";"+e+"x"+n;if(void 0===D[i]){var o=document.createElement("div");return fetch(t).then((function(t){return t.text()})).then((function(t){var r=document.createElement("div");r.innerHTML=t;var s=r.querySelector("svg");s.removeAttribute("xmlns:a"),s.setAttribute("width",e+"px"),s.setAttribute("height",n+"px"),o.parentNode.replaceChild(s,o),D[i]=s})),o}return D[i].cloneNode(!0)}};function N(t){this.id=t,this.nonRelativeDimensions=null,this.icon=null,this.title=null,this.position=new y(new v(0),new v(0),new v(0)),this.size=new g(new v(0),new v(0)),this.state={hidden:!1,relative:!1,moving:!1,resizing:!1,focus:!1,stashed:!1,allowMinimize:!0,allowMaximize:!0,allowClose:!0,alwaysOnTop:!1},this.windowElement=null,this.events={closed:new f(this),focus:new f(this),lostFocus:new f(this)}}N.prototype.applyDimensions=function(){null!==this.windowElement&&(this.windowElement.style.left=this.position.x.cssValue(),this.windowElement.style.top=this.position.y.cssValue(),this.windowElement.style["z-index"]=this.position.z.raw(),this.windowElement.style.width=this.size.x.cssValue(),this.windowElement.style.height=this.size.y.cssValue())},N.prototype.applyState=function(){var t=this;function e(e,n,i){t.state[e]!==i?t.windowElement.classList.contains(n)||t.windowElement.classList.add(n):t.windowElement.classList.contains(n)&&t.windowElement.classList.remove(n)}null!==this.windowElement&&(e("hidden","elara-window-hidden",!1),e("relative","elara-window-relative",!1),e("moving","elara-window-moving",!1),e("resizing","elara-window-resizing",!1),e("focus","elara-window-focus",!1),e("stashed","elara-window-stashed",!1),e("allowMinimize","elara-window-disable-minimize",!0),e("allowMaximize","elara-window-disable-maximize",!0),e("allowClose","elara-window-disable-close",!0),e("alwaysOnTop","elara-window-always-on-top",!1))},N.prototype.setRelative=function(t){this.state.relative!=t&&(this.state.relative=t,this.applyState(),t?this.setNonRelativeDimensions(this.position.x.raw(),this.position.y.raw(),this.size.x.raw(),this.size.y.raw()):this.restoreNonRelativeDimensions())},N.prototype.show=function(){this.state.hidden=!1,this.applyState()},N.prototype.minimize=function(){this.state.hidden=!0,this.applyState(),this.hasFocus()&&this.events.lostFocus.invoke()},N.prototype.setTitle=function(t){this.title=t,this.windowElement.querySelector(".elara-title").innerText=t},N.prototype.getTitle=function(){return this.title},N.prototype.getContentContainer=function(){return this.windowElement.querySelector(".elara-window-content")},N.prototype.toggleMaximize=function(){this.state.relative?this.setRelative(!1):this.resize("fullscreen")},N.prototype.getId=function(){return this.id},N.prototype.getWindow=function(){return this.windowElement},N.prototype.bindWindowElement=function(t){var e=this;t.querySelector(".elara-control-button.minimize").addEventListener("click",(function(){e.minimize()})),t.querySelector(".elara-control-button.maximize").addEventListener("click",(function(){e.maximize()})),t.querySelector(".elara-control-button.close").addEventListener("click",(function(){e.close()})),t.querySelector(".elara-title-bar").addEventListener("dblclick",(function(){e.toggleMaximize()})),t.setAttribute("data-controller-id",this.getId()),this.windowElement=t,this.applyDimensions(),this.applyState()},N.prototype.maximize=function(){this.resize("fullscreen")},N.prototype.close=function(){this.windowElement.parentElement.removeChild(this.windowElement),this.events.closed.invoke()},N.prototype.getIcon=function(){return this.icon},N.prototype.setIcon=function(t){if(this.icon!==t){this.icon=t;var e=this.windowElement.querySelector(".elara-icon-container");e.innerHTML="",e.appendChild(A.createSvgElement(this.icon,16,16))}},N.prototype.setNonRelativeDimensions=function(t,e,n,i){this.nonRelativeDimensions=null===t?null:{x:t,y:e,width:n,height:i}},N.prototype.restoreNonRelativeSize=function(){null!==this.nonRelativeDimensions&&(this.resize(this.nonRelativeDimensions.width,this.nonRelativeDimensions.height),this.nonRelativeDimensions=null)},N.prototype.restoreNonRelativePosition=function(){null!==this.nonRelativeDimensions&&(this.move(this.nonRelativeDimensions.x,this.nonRelativeDimensions.y),this.nonRelativeDimensions=null)},N.prototype.restoreNonRelativeDimensions=function(){if(null!==this.nonRelativeDimensions){var t=this.nonRelativeDimensions;this.move(t.x,t.y),this.resize(t.width,t.height),this.nonRelativeDimensions=null}},N.prototype.hasFocus=function(){return this.windowElement.classList.contains("elara-window-focus")},N.prototype.focus=function(){this.events.focus.invoke()},N.prototype.focusFromTaskbar=function(){this.hasFocus()?this.minimize():(this.show(),this.focus())},N.prototype.move=function(t,e){this.position.x=new v(t),this.position.y=new v(e),this.state.hidden=!1,this.applyDimensions(),this.applyState()},N.prototype.resize=function(t,e){if("string"==typeof t){var n=t;this.setRelative(!0);var i=k[n];this.position.x=new v(i.left),this.position.y=new v(i.top),this.size.x=new v(i.width),this.size.y=new v(i.height),this.applyDimensions()}else this.size.x=new v(t),this.size.y=new v(e),this.applyDimensions()},N.prototype.stash=function(){this.state.stashed=!0,this.applyState()},N.prototype.resume=function(){this.state.stashed=!1,this.applyState()},N.prototype.setAllowMinimize=function(t){this.state.allowMinimize!==t&&(this.state.allowMinimize=t,this.applyState())},N.prototype.setAllowMaximize=function(t){this.state.allowMaximize!==t&&(this.state.allowMaximize=t,this.applyState())},N.prototype.setAllowClose=function(t){this.state.allowClose!==t&&(this.state.allowClose=t,this.applyState())},N.prototype.setAlwaysOnTop=function(t){this.state.alwaysOnTop!==t&&(this.state.alwaysOnTop=t,this.applyState())};var R=N,P=[{left:0,right:1,top:0,bottom:1,name:"top-left"},{left:99,right:100,top:0,bottom:1,name:"top-right"},{left:0,right:1,top:99,bottom:100,name:"bottom-left"},{left:99,right:100,top:99,maxY:100,name:"bottom-right"},{left:0,right:100,top:0,bottom:1,name:"fullscreen"},{left:0,right:1,top:0,bottom:100,name:"left"},{left:99,right:100,top:0,bottom:100,name:"right"},{left:0,right:100,top:99,bottom:100,name:"bottom"}];function q(){this.windowContainer=null,this.windowSetCollection=new x,this.windowSetCollection.add(),this.windowSetCollection.selectAt(0),this.dragging=new M(this),this.construct=new T;var t=1;this.getNextId=function(){return t++}}q.prototype.bind=function(t){this.windowContainer=document.querySelector(t);var e=document.createElement("div");e.classList.add("window-drag-overlay"),this.windowContainer.appendChild(e),this.dragging.init()},q.prototype.getController=function(t){for(var e=this.windowSetCollection.count(),n=0;n<e;n++){var i=this.windowSetCollection.getAt(n).get(t);if(null!==i)return i}return null},q.prototype.getActiveControllerSet=function(){return this.windowSetCollection.getSelected()},q.prototype.createIFrameWindow=function(t,e){var n=this.createWindow(e),i=n.getContentContainer(),o=document.createElement("iframe");return o.src=t,i.appendChild(o),o.onload=function(){n.setTitle(o.contentDocument.title)},n.iframe=o,n},q.prototype.createWindow=function(t){var e=new R(this.getNextId()),n={title:"-",size:{width:600,height:400},location:{x:100,y:100},icon:null,allowMinimize:!0,allowMaximize:!0,allowClose:!0,alwaysOnTop:!1};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);var o=this.construct.window();return e.bindWindowElement(o),e.move(n.location.x,n.location.y),e.resize(n.size.width,n.size.height),e.setIcon(n.icon),e.setTitle(n.title),e.setAllowMinimize(n.allowMinimize),e.setAllowMaximize(n.allowMaximize),e.setAllowClose(n.allowClose),e.setAlwaysOnTop(n.alwaysOnTop),this.windowContainer.appendChild(o),this.getActiveControllerSet().add(e),e.focus(),e},q.prototype.getSuggestedDocking=function(t,e){var n=this.windowContainer.getBoundingClientRect(),i=Math.round((t-n.left)/n.width*100),o=Math.round((e-n.top)/n.height*100);i=Math.min(Math.max(i,0),100),o=Math.min(Math.max(o,0),100);for(var r=P,s=0;s<r.length;s++){var l=r[s];if(i>=l.left&&i<=l.right&&o>=l.top&&o<=l.bottom)return l.name}return null},q.prototype.renderSuggestedDocking=function(t,e){var n=this.getSuggestedDocking(t,e),i=this.windowContainer.querySelector(".window-drag-overlay .dock-preview");if(null!==n){null===i&&((i=document.createElement("div")).classList.add("dock-preview"),i.appendChild(document.createElement("div")),this.windowContainer.querySelector(".window-drag-overlay").appendChild(i)),i.style.display="block";var o=k[n];i.style.top=o.top,i.style.left=o.left,i.style.width=o.width,i.style.height=o.height}else null!==i&&(i.style.display="none")};var W=q,O=(n(3),W);function H(t,e){this.parent=t,this.title=e.title,this.image=e.image,this.open=e.open,this.x=0,this.y=0,this.element=null}H.prototype.construct=function(){var t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("div"),i=document.createElement("img");t.classList.add("tile"),e.classList.add("title"),n.classList.add("image-container"),e.innerText=this.title,i.src=this.image,n.appendChild(i),t.appendChild(n),t.appendChild(e),this.element=t,this.applyPosition(),i.addEventListener("dblclick",this.open),e.addEventListener("dblclick",this.open);var o=this;return t.addEventListener("mousedown",(function(t){o.startDragDrop(t)})),t},H.prototype.applyPosition=function(){this.element.style.top=this.y+"px",this.element.style.left=this.x+"px"},H.prototype.startDragDrop=function(t){var e=this;this.parent.engine.start(t,{init:function(t){t.initialX=e.x,t.initialY=e.y},transform:function(t,n,i,o,r,s,l){if(s&&e.element.classList.contains("animate-position")&&e.element.classList.remove("animate-position"),e.x=t.initialX+n,e.y=t.initialY+i,e.applyPosition(),l&&e.parent.settings.grid.enforce){var a=e.parent.translateScreenToGrid(e.x,e.y),c=e.parent.translateGridToScreen(a.x,a.y);e.x=c.x,e.y=c.y,e.element.classList.add("animate-position"),e.applyPosition()}}})};var B=H;function F(){this.selector=null,this.items=[],this.engine=new E,this.settings={grid:{enforce:!0,tile:{height:96,width:96,margin:16}}}}F.prototype.bind=function(t){this.selector=t},F.prototype.update=function(t){this.items=[];for(var e=0;e<t.length;e++)this.items.push(new B(this,t[e]));this.autoArrangeItems(),this.construct()},F.prototype.autoArrangeItems=function(){for(var t=Math.ceil(Math.sqrt(this.items.length)),e=0;e<this.items.length;e++){var n=e%t,i=Math.floor(e/t),o=this.translateGridToScreen(n,i);this.items[e].x=o.x,this.items[e].y=o.y}},F.prototype.translateGridToScreen=function(t,e){var n=this.settings.grid;return{x:(n.tile.width+2*n.tile.margin)*t+n.tile.margin,y:(n.tile.height+2*n.tile.margin)*e+n.tile.margin}},F.prototype.translateScreenToGrid=function(t,e){var n=this.settings.grid;return{x:+Math.round((t-n.tile.margin)/(n.tile.width+2*n.tile.margin)),y:+Math.round((e-n.tile.margin)/(n.tile.height+2*n.tile.margin))}},F.prototype.construct=function(){var t=document.querySelector(this.selector);t.innerHTML="";for(var e=0;e<this.items.length;e++)t.appendChild(this.items[e].construct())};var Y=F,I=(n(4),Y);window.Elara={WindowManager:O,Taskbar:l,Toolbar:m,TileView:I}}]);